<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>FreeRTOS Tetris: Timer Control</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="custom-doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">FreeRTOS Tetris
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a>  </div>
  <div class="headertitle">
<div class="title">Timer Control<div class="ingroups"><a class="el" href="group__freeRTOS.html">FreeRTOS Kernel</a> &raquo; <a class="el" href="group__Timers.html">Software Timers</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Group that contains macros &amp; functions to start, stop, reset and change the period of timers.  
<a href="#details">More...</a></p>
<div class="dynheader">
Collaboration diagram for Timer Control:</div>
<div class="dyncontent">
<div class="center"><img src="group__xTimerControl.png" border="0" usemap="#group____xTimerControl" alt=""/></div>
<map name="group____xTimerControl" id="group____xTimerControl">
<area shape="rect" href="group__Timers.html" title="Group that handles FreeRTOS Timers." alt="" coords="5,5,133,31"/>
<area shape="rect" title="Group that contains macros &amp; functions to start, stop, reset and change the period of timers." alt="" coords="181,5,292,31"/>
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga3a9b838f48991e852ce05c986b0eeb8c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xTimerControl.html#ga3a9b838f48991e852ce05c986b0eeb8c">xTimerStart</a>(xTimer,  xTicksToWait)&#160;&#160;&#160;xTimerGenericCommand( ( xTimer ), tmrCOMMAND_START, ( <a class="el" href="group__TaskUtilities.html#ga753ecfe23e7386066ecccad5d16422f7">xTaskGetTickCount</a>() ), NULL, ( xTicksToWait ) )</td></tr>
<tr class="memdesc:ga3a9b838f48991e852ce05c986b0eeb8c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start a timer that was previously created using the <a class="el" href="group__xTimerCreate.html#gacd5834fe4b94778f6204866277042627" title="Creates a new software timer instance, and returns a handle by which the created software timer can b...">xTimerCreate()</a> API function. If the timer had already been started and was already in the active state, then <a class="el" href="group__xTimerControl.html#ga3a9b838f48991e852ce05c986b0eeb8c" title="Start a timer that was previously created using the xTimerCreate() API function. If the timer had alr...">xTimerStart()</a> has equivalent functionality to the <a class="el" href="group__xTimerControl.html#ga8081b4541b752908dc55df2693e53287" title="xTimerReset() re-starts a timer that was previously created using the xTimerCreate() API function....">xTimerReset()</a> API function.  <a href="group__xTimerControl.html#ga3a9b838f48991e852ce05c986b0eeb8c">More...</a><br /></td></tr>
<tr class="separator:ga3a9b838f48991e852ce05c986b0eeb8c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8327c7fc10aee414cb163b445c5269a4"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xTimerControl.html#ga8327c7fc10aee414cb163b445c5269a4">xTimerStop</a>(xTimer,  xTicksToWait)&#160;&#160;&#160;xTimerGenericCommand( ( xTimer ), tmrCOMMAND_STOP, 0U, NULL, ( xTicksToWait ) )</td></tr>
<tr class="memdesc:ga8327c7fc10aee414cb163b445c5269a4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stop a timer that was previously started using either of the <a class="el" href="group__xTimerControl.html#ga3a9b838f48991e852ce05c986b0eeb8c" title="Start a timer that was previously created using the xTimerCreate() API function. If the timer had alr...">xTimerStart()</a>, <a class="el" href="group__xTimerControl.html#ga8081b4541b752908dc55df2693e53287" title="xTimerReset() re-starts a timer that was previously created using the xTimerCreate() API function....">xTimerReset()</a>, xTimerStartFromISR(), xTimerResetFromISR(), <a class="el" href="group__xTimerControl.html#gab12eac1c69a3437b8161ce81ff34b2f4" title="Change the period of a timer that was previously created using the xTimerCreate() API function.">xTimerChangePeriod()</a> or xTimerChangePeriodFromISR() API functions.  <a href="group__xTimerControl.html#ga8327c7fc10aee414cb163b445c5269a4">More...</a><br /></td></tr>
<tr class="separator:ga8327c7fc10aee414cb163b445c5269a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8081b4541b752908dc55df2693e53287"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xTimerControl.html#ga8081b4541b752908dc55df2693e53287">xTimerReset</a>(xTimer,  xTicksToWait)&#160;&#160;&#160;xTimerGenericCommand( ( xTimer ), tmrCOMMAND_RESET, ( <a class="el" href="group__TaskUtilities.html#ga753ecfe23e7386066ecccad5d16422f7">xTaskGetTickCount</a>() ), NULL, ( xTicksToWait ) )</td></tr>
<tr class="memdesc:ga8081b4541b752908dc55df2693e53287"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="group__xTimerControl.html#ga8081b4541b752908dc55df2693e53287" title="xTimerReset() re-starts a timer that was previously created using the xTimerCreate() API function....">xTimerReset()</a> re-starts a timer that was previously created using the <a class="el" href="group__xTimerCreate.html#gacd5834fe4b94778f6204866277042627" title="Creates a new software timer instance, and returns a handle by which the created software timer can b...">xTimerCreate()</a> API function. If the timer had already been started and was already in the active state, then <a class="el" href="group__xTimerControl.html#ga8081b4541b752908dc55df2693e53287" title="xTimerReset() re-starts a timer that was previously created using the xTimerCreate() API function....">xTimerReset()</a> will cause the timer to re-evaluate its expiry time so that it is relative to when <a class="el" href="group__xTimerControl.html#ga8081b4541b752908dc55df2693e53287" title="xTimerReset() re-starts a timer that was previously created using the xTimerCreate() API function....">xTimerReset()</a> was called. If the timer was in the dormant state then <a class="el" href="group__xTimerControl.html#ga8081b4541b752908dc55df2693e53287" title="xTimerReset() re-starts a timer that was previously created using the xTimerCreate() API function....">xTimerReset()</a> has equivalent functionality to the <a class="el" href="group__xTimerControl.html#ga3a9b838f48991e852ce05c986b0eeb8c" title="Start a timer that was previously created using the xTimerCreate() API function. If the timer had alr...">xTimerStart()</a> API function.  <a href="group__xTimerControl.html#ga8081b4541b752908dc55df2693e53287">More...</a><br /></td></tr>
<tr class="separator:ga8081b4541b752908dc55df2693e53287"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab12eac1c69a3437b8161ce81ff34b2f4"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xTimerControl.html#gab12eac1c69a3437b8161ce81ff34b2f4">xTimerChangePeriod</a>(xTimer,  xNewPeriod,  xTicksToWait)&#160;&#160;&#160;xTimerGenericCommand( ( xTimer ), tmrCOMMAND_CHANGE_PERIOD, ( xNewPeriod ), NULL, ( xTicksToWait ) )</td></tr>
<tr class="memdesc:gab12eac1c69a3437b8161ce81ff34b2f4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Change the period of a timer that was previously created using the <a class="el" href="group__xTimerCreate.html#gacd5834fe4b94778f6204866277042627" title="Creates a new software timer instance, and returns a handle by which the created software timer can b...">xTimerCreate()</a> API function.  <a href="group__xTimerControl.html#gab12eac1c69a3437b8161ce81ff34b2f4">More...</a><br /></td></tr>
<tr class="separator:gab12eac1c69a3437b8161ce81ff34b2f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Group that contains macros &amp; functions to start, stop, reset and change the period of timers. </p>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="gab12eac1c69a3437b8161ce81ff34b2f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab12eac1c69a3437b8161ce81ff34b2f4">&#9670;&nbsp;</a></span>xTimerChangePeriod</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define xTimerChangePeriod</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">xTimer, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">xNewPeriod, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">xTicksToWait&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;xTimerGenericCommand( ( xTimer ), tmrCOMMAND_CHANGE_PERIOD, ( xNewPeriod ), NULL, ( xTicksToWait ) )</td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;timers.h&gt;</code></p>

<p>Change the period of a timer that was previously created using the <a class="el" href="group__xTimerCreate.html#gacd5834fe4b94778f6204866277042627" title="Creates a new software timer instance, and returns a handle by which the created software timer can b...">xTimerCreate()</a> API function. </p>
<p>Timer functionality is provided by a timer service/daemon task. Many of the public FreeRTOS timer API functions send commands to the timer service task through a queue called the timer command queue. The timer command queue is private to the kernel itself and is not directly accessible to application code. The length of the timer command queue is set by the configTIMER_QUEUE_LENGTH configuration constant.</p>
<p><a class="el" href="group__xTimerControl.html#gab12eac1c69a3437b8161ce81ff34b2f4" title="Change the period of a timer that was previously created using the xTimerCreate() API function.">xTimerChangePeriod()</a> can be called to change the period of an active or dormant state timer.</p>
<p>The configUSE_TIMERS configuration constant must be set to 1 for <a class="el" href="group__xTimerControl.html#gab12eac1c69a3437b8161ce81ff34b2f4" title="Change the period of a timer that was previously created using the xTimerCreate() API function.">xTimerChangePeriod()</a> to be available.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">xTimer</td><td>The handle of the timer that is having its period changed.</td></tr>
    <tr><td class="paramname">xNewPeriod</td><td>The new period for xTimer. Timer periods are specified in tick periods, so the constant portTICK_PERIOD_MS can be used to convert a time that has been specified in milliseconds. For example, if the timer must expire after 100 ticks, then xNewPeriod should be set to 100. Alternatively, if the timer must expire after 500ms, then xNewPeriod can be set to ( 500 / portTICK_PERIOD_MS ) provided configTICK_RATE_HZ is less than or equal to 1000.</td></tr>
    <tr><td class="paramname">xTicksToWait</td><td>Specifies the time, in ticks, that the calling task should be held in the Blocked state to wait for the change period command to be successfully sent to the timer command queue, should the queue already be full when <a class="el" href="group__xTimerControl.html#gab12eac1c69a3437b8161ce81ff34b2f4" title="Change the period of a timer that was previously created using the xTimerCreate() API function.">xTimerChangePeriod()</a> was called. xTicksToWait is ignored if <a class="el" href="group__xTimerControl.html#gab12eac1c69a3437b8161ce81ff34b2f4" title="Change the period of a timer that was previously created using the xTimerCreate() API function.">xTimerChangePeriod()</a> is called before the scheduler is started.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>pdFAIL will be returned if the change period command could not be sent to the timer command queue even after xTicksToWait ticks had passed. pdPASS will be returned if the command was successfully sent to the timer command queue. When the command is actually processed will depend on the priority of the timer service/daemon task relative to other tasks in the system. The timer service/daemon task priority is set by the configTIMER_TASK_PRIORITY configuration constant.</dd></dl>
<p>Example usage: </p><div class="fragment"><div class="line"><span class="comment">// This function assumes xTimer has already been created.  If the timer</span></div>
<div class="line"><span class="comment">// referenced by xTimer is already active when it is called, then the timer</span></div>
<div class="line"><span class="comment">// is deleted.  If the timer referenced by xTimer is not active when it is</span></div>
<div class="line"><span class="comment">// called, then the period of the timer is set to 500ms and the timer is</span></div>
<div class="line"><span class="comment">// started.</span></div>
<div class="line"><span class="keywordtype">void</span> vAFunction( <a class="code" href="group__TimerHandle.html#gaae4bf1dce696ab615d5fd073606fd3cb">TimerHandle_t</a> xTimer )</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span>( <a class="code" href="group__xTimerUtility.html#ga2cd9b1399fb25203be698f123846dc33">xTimerIsTimerActive</a>( xTimer ) != pdFALSE ) <span class="comment">// or more simply and equivalently &quot;if( xTimerIsTimerActive( xTimer ) )&quot;</span></div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// xTimer is already active - delete it.</span></div>
<div class="line">        <a class="code" href="group__xTimerDelete.html#ga8c8e21f05ebe92e15449addc5d269d10">xTimerDelete</a>( xTimer );</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// xTimer is not active, change its period to 500ms.  This will also</span></div>
<div class="line">        <span class="comment">// cause the timer to start.  Block for a maximum of 100 ticks if the</span></div>
<div class="line">        <span class="comment">// change period command cannot immediately be sent to the timer</span></div>
<div class="line">        <span class="comment">// command queue.</span></div>
<div class="line">        <span class="keywordflow">if</span>( <a class="code" href="group__xTimerControl.html#gab12eac1c69a3437b8161ce81ff34b2f4">xTimerChangePeriod</a>( xTimer, 500 / <a class="code" href="group__freeRTOSconfig.html#ga554d9322ce7f698a86a22b21234bd8cd">portTICK_PERIOD_MS</a>, 100 ) == pdPASS )</div>
<div class="line">        {</div>
<div class="line">            <span class="comment">// The command was successfully sent.</span></div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line">        {</div>
<div class="line">            <span class="comment">// The command could not be sent, even after waiting for 100 ticks</span></div>
<div class="line">            <span class="comment">// to pass.  Take appropriate action here.</span></div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
</div>
<a id="ga8081b4541b752908dc55df2693e53287"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8081b4541b752908dc55df2693e53287">&#9670;&nbsp;</a></span>xTimerReset</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define xTimerReset</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">xTimer, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">xTicksToWait&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;xTimerGenericCommand( ( xTimer ), tmrCOMMAND_RESET, ( <a class="el" href="group__TaskUtilities.html#ga753ecfe23e7386066ecccad5d16422f7">xTaskGetTickCount</a>() ), NULL, ( xTicksToWait ) )</td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;timers.h&gt;</code></p>

<p><a class="el" href="group__xTimerControl.html#ga8081b4541b752908dc55df2693e53287" title="xTimerReset() re-starts a timer that was previously created using the xTimerCreate() API function....">xTimerReset()</a> re-starts a timer that was previously created using the <a class="el" href="group__xTimerCreate.html#gacd5834fe4b94778f6204866277042627" title="Creates a new software timer instance, and returns a handle by which the created software timer can b...">xTimerCreate()</a> API function. If the timer had already been started and was already in the active state, then <a class="el" href="group__xTimerControl.html#ga8081b4541b752908dc55df2693e53287" title="xTimerReset() re-starts a timer that was previously created using the xTimerCreate() API function....">xTimerReset()</a> will cause the timer to re-evaluate its expiry time so that it is relative to when <a class="el" href="group__xTimerControl.html#ga8081b4541b752908dc55df2693e53287" title="xTimerReset() re-starts a timer that was previously created using the xTimerCreate() API function....">xTimerReset()</a> was called. If the timer was in the dormant state then <a class="el" href="group__xTimerControl.html#ga8081b4541b752908dc55df2693e53287" title="xTimerReset() re-starts a timer that was previously created using the xTimerCreate() API function....">xTimerReset()</a> has equivalent functionality to the <a class="el" href="group__xTimerControl.html#ga3a9b838f48991e852ce05c986b0eeb8c" title="Start a timer that was previously created using the xTimerCreate() API function. If the timer had alr...">xTimerStart()</a> API function. </p>
<p>Timer functionality is provided by a timer service/daemon task. Many of the public FreeRTOS timer API functions send commands to the timer service task through a queue called the timer command queue. The timer command queue is private to the kernel itself and is not directly accessible to application code. The length of the timer command queue is set by the configTIMER_QUEUE_LENGTH configuration constant.</p>
<p>Resetting a timer ensures the timer is in the active state. If the timer is not stopped, deleted, or reset in the mean time, the callback function associated with the timer will get called 'n' ticks after <a class="el" href="group__xTimerControl.html#ga8081b4541b752908dc55df2693e53287" title="xTimerReset() re-starts a timer that was previously created using the xTimerCreate() API function....">xTimerReset()</a> was called, where 'n' is the timers defined period.</p>
<p>It is valid to call <a class="el" href="group__xTimerControl.html#ga8081b4541b752908dc55df2693e53287" title="xTimerReset() re-starts a timer that was previously created using the xTimerCreate() API function....">xTimerReset()</a> before the scheduler has been started, but when this is done the timer will not actually start until the scheduler is started, and the timers expiry time will be relative to when the scheduler is started, not relative to when <a class="el" href="group__xTimerControl.html#ga8081b4541b752908dc55df2693e53287" title="xTimerReset() re-starts a timer that was previously created using the xTimerCreate() API function....">xTimerReset()</a> was called.</p>
<p>The configUSE_TIMERS configuration constant must be set to 1 for <a class="el" href="group__xTimerControl.html#ga8081b4541b752908dc55df2693e53287" title="xTimerReset() re-starts a timer that was previously created using the xTimerCreate() API function....">xTimerReset()</a> to be available.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">xTimer</td><td>The handle of the timer being reset/started/restarted.</td></tr>
    <tr><td class="paramname">xTicksToWait</td><td>Specifies the time, in ticks, that the calling task should be held in the Blocked state to wait for the reset command to be successfully sent to the timer command queue, should the queue already be full when <a class="el" href="group__xTimerControl.html#ga8081b4541b752908dc55df2693e53287" title="xTimerReset() re-starts a timer that was previously created using the xTimerCreate() API function....">xTimerReset()</a> was called. xTicksToWait is ignored if <a class="el" href="group__xTimerControl.html#ga8081b4541b752908dc55df2693e53287" title="xTimerReset() re-starts a timer that was previously created using the xTimerCreate() API function....">xTimerReset()</a> is called before the scheduler is started.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>pdFAIL will be returned if the reset command could not be sent to the timer command queue even after xTicksToWait ticks had passed. pdPASS will be returned if the command was successfully sent to the timer command queue. When the command is actually processed will depend on the priority of the timer service/daemon task relative to other tasks in the system, although the timers expiry time is relative to when <a class="el" href="group__xTimerControl.html#ga3a9b838f48991e852ce05c986b0eeb8c" title="Start a timer that was previously created using the xTimerCreate() API function. If the timer had alr...">xTimerStart()</a> is actually called. The timer service/daemon task priority is set by the configTIMER_TASK_PRIORITY configuration constant.</dd></dl>
<p>Example usage: </p><div class="fragment"><div class="line"><span class="comment">// When a key is pressed, an LCD back-light is switched on.  If 5 seconds pass</span></div>
<div class="line"><span class="comment">// without a key being pressed, then the LCD back-light is switched off.  In</span></div>
<div class="line"><span class="comment">// this case, the timer is a one-shot timer.</span></div>
<div class="line"> </div>
<div class="line"><a class="code" href="group__TimerHandle.html#gaae4bf1dce696ab615d5fd073606fd3cb">TimerHandle_t</a> xBacklightTimer = NULL;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// The callback function assigned to the one-shot timer.  In this case the</span></div>
<div class="line"><span class="comment">// parameter is not used.</span></div>
<div class="line"><span class="keywordtype">void</span> vBacklightTimerCallback( <a class="code" href="group__TimerHandle.html#gaae4bf1dce696ab615d5fd073606fd3cb">TimerHandle_t</a> pxTimer )</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// The timer expired, therefore 5 seconds must have passed since a key</span></div>
<div class="line">    <span class="comment">// was pressed.  Switch off the LCD back-light.</span></div>
<div class="line">    vSetBacklightState( BACKLIGHT_OFF );</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// The key press event handler.</span></div>
<div class="line"><span class="keywordtype">void</span> vKeyPressEventHandler( <span class="keywordtype">char</span> cKey )</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// Ensure the LCD back-light is on, then reset the timer that is</span></div>
<div class="line">    <span class="comment">// responsible for turning the back-light off after 5 seconds of</span></div>
<div class="line">    <span class="comment">// key inactivity.  Wait 10 ticks for the command to be successfully sent</span></div>
<div class="line">    <span class="comment">// if it cannot be sent immediately.</span></div>
<div class="line">    vSetBacklightState( BACKLIGHT_ON );</div>
<div class="line">    <span class="keywordflow">if</span>( <a class="code" href="group__xTimerControl.html#ga8081b4541b752908dc55df2693e53287">xTimerReset</a>( xBacklightTimer, 100 ) != pdPASS )</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// The reset command was not executed successfully.  Take appropriate</span></div>
<div class="line">        <span class="comment">// action here.</span></div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Perform the rest of the key processing here.</span></div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> main( <span class="keywordtype">void</span> )</div>
<div class="line">{</div>
<div class="line">    int32_t x;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Create then start the one-shot timer that is responsible for turning</span></div>
<div class="line">    <span class="comment">// the back-light off if no keys are pressed within a 5 second period.</span></div>
<div class="line">    xBacklightTimer = <a class="code" href="group__xTimerCreate.html#gacd5834fe4b94778f6204866277042627">xTimerCreate</a>( <span class="stringliteral">&quot;BacklightTimer&quot;</span>,           <span class="comment">// Just a text name, not used by the kernel.</span></div>
<div class="line">                                    ( 5000 / <a class="code" href="group__freeRTOSconfig.html#ga554d9322ce7f698a86a22b21234bd8cd">portTICK_PERIOD_MS</a>), <span class="comment">// The timer period in ticks.</span></div>
<div class="line">                                    pdFALSE,                    <span class="comment">// The timer is a one-shot timer.</span></div>
<div class="line">                                    0,                          <span class="comment">// The id is not used by the callback so can take any value.</span></div>
<div class="line">                                    vBacklightTimerCallback     <span class="comment">// The callback function that switches the LCD back-light off.</span></div>
<div class="line">                                );</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span>( xBacklightTimer == NULL )</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// The timer was not created.</span></div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// Start the timer.  No block time is specified, and even if one was</span></div>
<div class="line">        <span class="comment">// it would be ignored because the scheduler has not yet been</span></div>
<div class="line">        <span class="comment">// started.</span></div>
<div class="line">        <span class="keywordflow">if</span>( <a class="code" href="group__xTimerControl.html#ga3a9b838f48991e852ce05c986b0eeb8c">xTimerStart</a>( xBacklightTimer, 0 ) != pdPASS )</div>
<div class="line">        {</div>
<div class="line">            <span class="comment">// The timer could not be set into the Active state.</span></div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// ...</span></div>
<div class="line">    <span class="comment">// Create tasks here.</span></div>
<div class="line">    <span class="comment">// ...</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Starting the scheduler will start the timer running as it has already</span></div>
<div class="line">    <span class="comment">// been set into the active state.</span></div>
<div class="line">    <a class="code" href="group__KernelControl.html#gaaf9dca1065c60abdeb309d56ab7293cb">vTaskStartScheduler</a>();</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Should not reach here.</span></div>
<div class="line">    <span class="keywordflow">for</span>( ;; );</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
</div>
<a id="ga3a9b838f48991e852ce05c986b0eeb8c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3a9b838f48991e852ce05c986b0eeb8c">&#9670;&nbsp;</a></span>xTimerStart</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define xTimerStart</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">xTimer, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">xTicksToWait&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;xTimerGenericCommand( ( xTimer ), tmrCOMMAND_START, ( <a class="el" href="group__TaskUtilities.html#ga753ecfe23e7386066ecccad5d16422f7">xTaskGetTickCount</a>() ), NULL, ( xTicksToWait ) )</td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;timers.h&gt;</code></p>

<p>Start a timer that was previously created using the <a class="el" href="group__xTimerCreate.html#gacd5834fe4b94778f6204866277042627" title="Creates a new software timer instance, and returns a handle by which the created software timer can b...">xTimerCreate()</a> API function. If the timer had already been started and was already in the active state, then <a class="el" href="group__xTimerControl.html#ga3a9b838f48991e852ce05c986b0eeb8c" title="Start a timer that was previously created using the xTimerCreate() API function. If the timer had alr...">xTimerStart()</a> has equivalent functionality to the <a class="el" href="group__xTimerControl.html#ga8081b4541b752908dc55df2693e53287" title="xTimerReset() re-starts a timer that was previously created using the xTimerCreate() API function....">xTimerReset()</a> API function. </p>
<p>Timer functionality is provided by a timer service/daemon task. Many of the public FreeRTOS timer API functions send commands to the timer service task through a queue called the timer command queue. The timer command queue is private to the kernel itself and is not directly accessible to application code. The length of the timer command queue is set by the configTIMER_QUEUE_LENGTH configuration constant.</p>
<p>Starting a timer ensures the timer is in the active state. If the timer is not stopped, deleted, or reset in the mean time, the callback function associated with the timer will get called 'n' ticks after <a class="el" href="group__xTimerControl.html#ga3a9b838f48991e852ce05c986b0eeb8c" title="Start a timer that was previously created using the xTimerCreate() API function. If the timer had alr...">xTimerStart()</a> was called, where 'n' is the timers defined period.</p>
<p>It is valid to call <a class="el" href="group__xTimerControl.html#ga3a9b838f48991e852ce05c986b0eeb8c" title="Start a timer that was previously created using the xTimerCreate() API function. If the timer had alr...">xTimerStart()</a> before the scheduler has been started, but when this is done the timer will not actually start until the scheduler is started, and the timers expiry time will be relative to when the scheduler is started, not relative to when <a class="el" href="group__xTimerControl.html#ga3a9b838f48991e852ce05c986b0eeb8c" title="Start a timer that was previously created using the xTimerCreate() API function. If the timer had alr...">xTimerStart()</a> was called.</p>
<p>The configUSE_TIMERS configuration constant must be set to 1 for <a class="el" href="group__xTimerControl.html#ga3a9b838f48991e852ce05c986b0eeb8c" title="Start a timer that was previously created using the xTimerCreate() API function. If the timer had alr...">xTimerStart()</a> to be available.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">xTimer</td><td>The handle of the timer being started/restarted.</td></tr>
    <tr><td class="paramname">xTicksToWait</td><td>Specifies the time, in ticks, that the calling task should be held in the Blocked state to wait for the start command to be successfully sent to the timer command queue, should the queue already be full when <a class="el" href="group__xTimerControl.html#ga3a9b838f48991e852ce05c986b0eeb8c" title="Start a timer that was previously created using the xTimerCreate() API function. If the timer had alr...">xTimerStart()</a> was called. xTicksToWait is ignored if <a class="el" href="group__xTimerControl.html#ga3a9b838f48991e852ce05c986b0eeb8c" title="Start a timer that was previously created using the xTimerCreate() API function. If the timer had alr...">xTimerStart()</a> is called before the scheduler is started.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>pdFAIL will be returned if the start command could not be sent to the timer command queue even after xTicksToWait ticks had passed. pdPASS will be returned if the command was successfully sent to the timer command queue. When the command is actually processed will depend on the priority of the timer service/daemon task relative to other tasks in the system, although the timers expiry time is relative to when <a class="el" href="group__xTimerControl.html#ga3a9b838f48991e852ce05c986b0eeb8c" title="Start a timer that was previously created using the xTimerCreate() API function. If the timer had alr...">xTimerStart()</a> is actually called. The timer service/daemon task priority is set by the configTIMER_TASK_PRIORITY configuration constant.</dd></dl>
<p>Example usage:</p>
<p>See the <a class="el" href="group__xTimerCreate.html#gacd5834fe4b94778f6204866277042627" title="Creates a new software timer instance, and returns a handle by which the created software timer can b...">xTimerCreate()</a> API function example usage scenario. </p>

</div>
</div>
<a id="ga8327c7fc10aee414cb163b445c5269a4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8327c7fc10aee414cb163b445c5269a4">&#9670;&nbsp;</a></span>xTimerStop</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define xTimerStop</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">xTimer, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">xTicksToWait&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;xTimerGenericCommand( ( xTimer ), tmrCOMMAND_STOP, 0U, NULL, ( xTicksToWait ) )</td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;timers.h&gt;</code></p>

<p>Stop a timer that was previously started using either of the <a class="el" href="group__xTimerControl.html#ga3a9b838f48991e852ce05c986b0eeb8c" title="Start a timer that was previously created using the xTimerCreate() API function. If the timer had alr...">xTimerStart()</a>, <a class="el" href="group__xTimerControl.html#ga8081b4541b752908dc55df2693e53287" title="xTimerReset() re-starts a timer that was previously created using the xTimerCreate() API function....">xTimerReset()</a>, xTimerStartFromISR(), xTimerResetFromISR(), <a class="el" href="group__xTimerControl.html#gab12eac1c69a3437b8161ce81ff34b2f4" title="Change the period of a timer that was previously created using the xTimerCreate() API function.">xTimerChangePeriod()</a> or xTimerChangePeriodFromISR() API functions. </p>
<p>Timer functionality is provided by a timer service/daemon task. Many of the public FreeRTOS timer API functions send commands to the timer service task through a queue called the timer command queue. The timer command queue is private to the kernel itself and is not directly accessible to application code. The length of the timer command queue is set by the configTIMER_QUEUE_LENGTH configuration constant.</p>
<p>Stopping a timer ensures the timer is not in the active state.</p>
<p>The configUSE_TIMERS configuration constant must be set to 1 for <a class="el" href="group__xTimerControl.html#ga8327c7fc10aee414cb163b445c5269a4" title="Stop a timer that was previously started using either of the xTimerStart(), xTimerReset(),...">xTimerStop()</a> to be available.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">xTimer</td><td>The handle of the timer being stopped.</td></tr>
    <tr><td class="paramname">xTicksToWait</td><td>Specifies the time, in ticks, that the calling task should be held in the Blocked state to wait for the stop command to be successfully sent to the timer command queue, should the queue already be full when <a class="el" href="group__xTimerControl.html#ga8327c7fc10aee414cb163b445c5269a4" title="Stop a timer that was previously started using either of the xTimerStart(), xTimerReset(),...">xTimerStop()</a> was called. xTicksToWait is ignored if <a class="el" href="group__xTimerControl.html#ga8327c7fc10aee414cb163b445c5269a4" title="Stop a timer that was previously started using either of the xTimerStart(), xTimerReset(),...">xTimerStop()</a> is called before the scheduler is started.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>pdFAIL will be returned if the stop command could not be sent to the timer command queue even after xTicksToWait ticks had passed. pdPASS will be returned if the command was successfully sent to the timer command queue. When the command is actually processed will depend on the priority of the timer service/daemon task relative to other tasks in the system. The timer service/daemon task priority is set by the configTIMER_TASK_PRIORITY configuration constant.</dd></dl>
<p>Example usage:</p>
<p>See the <a class="el" href="group__xTimerCreate.html#gacd5834fe4b94778f6204866277042627" title="Creates a new software timer instance, and returns a handle by which the created software timer can b...">xTimerCreate()</a> API function example usage scenario. </p>

</div>
</div>
</div><!-- contents -->
<div class="ttc" id="agroup__xTimerDelete_html_ga8c8e21f05ebe92e15449addc5d269d10"><div class="ttname"><a href="group__xTimerDelete.html#ga8c8e21f05ebe92e15449addc5d269d10">xTimerDelete</a></div><div class="ttdeci">#define xTimerDelete(xTimer, xTicksToWait)</div><div class="ttdoc">Delete a timer that was previously created using the xTimerCreate() API function.</div><div class="ttdef"><b>Definition:</b> timers.h:454</div></div>
<div class="ttc" id="agroup__xTimerControl_html_ga3a9b838f48991e852ce05c986b0eeb8c"><div class="ttname"><a href="group__xTimerControl.html#ga3a9b838f48991e852ce05c986b0eeb8c">xTimerStart</a></div><div class="ttdeci">#define xTimerStart(xTimer, xTicksToWait)</div><div class="ttdoc">Start a timer that was previously created using the xTimerCreate() API function. If the timer had alr...</div><div class="ttdef"><b>Definition:</b> timers.h:508</div></div>
<div class="ttc" id="agroup__TimerHandle_html_gaae4bf1dce696ab615d5fd073606fd3cb"><div class="ttname"><a href="group__TimerHandle.html#gaae4bf1dce696ab615d5fd073606fd3cb">TimerHandle_t</a></div><div class="ttdeci">void * TimerHandle_t</div><div class="ttdoc">Type by which software timers are referenced. For example, a call to xTimerCreate() returns an TimerH...</div><div class="ttdef"><b>Definition:</b> timers.h:154</div></div>
<div class="ttc" id="agroup__xTimerControl_html_ga8081b4541b752908dc55df2693e53287"><div class="ttname"><a href="group__xTimerControl.html#ga8081b4541b752908dc55df2693e53287">xTimerReset</a></div><div class="ttdeci">#define xTimerReset(xTimer, xTicksToWait)</div><div class="ttdoc">xTimerReset() re-starts a timer that was previously created using the xTimerCreate() API function....</div><div class="ttdef"><b>Definition:</b> timers.h:671</div></div>
<div class="ttc" id="agroup__freeRTOSconfig_html_ga554d9322ce7f698a86a22b21234bd8cd"><div class="ttname"><a href="group__freeRTOSconfig.html#ga554d9322ce7f698a86a22b21234bd8cd">portTICK_PERIOD_MS</a></div><div class="ttdeci">#define portTICK_PERIOD_MS</div><div class="ttdoc">The tick period in ms.</div><div class="ttdef"><b>Definition:</b> portmacro.h:110</div></div>
<div class="ttc" id="agroup__KernelControl_html_gaaf9dca1065c60abdeb309d56ab7293cb"><div class="ttname"><a href="group__KernelControl.html#gaaf9dca1065c60abdeb309d56ab7293cb">vTaskStartScheduler</a></div><div class="ttdeci">void vTaskStartScheduler(void) PRIVILEGED_FUNCTION</div><div class="ttdoc">Starts the real time kernel tick processing. After calling the kernel has control over which tasks ar...</div><div class="ttdef"><b>Definition:</b> tasks.c:1709</div></div>
<div class="ttc" id="agroup__xTimerCreate_html_gacd5834fe4b94778f6204866277042627"><div class="ttname"><a href="group__xTimerCreate.html#gacd5834fe4b94778f6204866277042627">xTimerCreate</a></div><div class="ttdeci">TimerHandle_t xTimerCreate(const char *const pcTimerName, const TickType_t xTimerPeriodInTicks, const UBaseType_t uxAutoReload, void *const pvTimerID, TimerCallbackFunction_t pxCallbackFunction) PRIVILEGED_FUNCTION</div><div class="ttdoc">Creates a new software timer instance, and returns a handle by which the created software timer can b...</div></div>
<div class="ttc" id="agroup__xTimerUtility_html_ga2cd9b1399fb25203be698f123846dc33"><div class="ttname"><a href="group__xTimerUtility.html#ga2cd9b1399fb25203be698f123846dc33">xTimerIsTimerActive</a></div><div class="ttdeci">BaseType_t xTimerIsTimerActive(TimerHandle_t xTimer) PRIVILEGED_FUNCTION</div><div class="ttdoc">Queries a timer to see if it is active or dormant.</div></div>
<div class="ttc" id="agroup__xTimerControl_html_gab12eac1c69a3437b8161ce81ff34b2f4"><div class="ttname"><a href="group__xTimerControl.html#gab12eac1c69a3437b8161ce81ff34b2f4">xTimerChangePeriod</a></div><div class="ttdeci">#define xTimerChangePeriod(xTimer, xNewPeriod, xTicksToWait)</div><div class="ttdoc">Change the period of a timer that was previously created using the xTimerCreate() API function.</div><div class="ttdef"><b>Definition:</b> timers.h:748</div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
